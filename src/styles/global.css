@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .glitch-overlay {
    position: relative;
    overflow: hidden;
  }

  .glitch-overlay::before,
  .glitch-overlay::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: inherit;
    background-size: cover;
    background-position: top;
    opacity: 0.5;
    z-index: 10;
    pointer-events: none;
  }

  .group:hover .glitch-overlay::before {
    animation: glitch-anim-1 2s infinite linear alternate-reverse;
    background: linear-gradient(rgba(255, 0, 0, 0.2), transparent);
    clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
    transform: translate(-5px);
  }

  .group:hover .glitch-overlay::after {
    animation: glitch-anim-2 3s infinite linear alternate-reverse;
    background: linear-gradient(rgba(0, 0, 255, 0.2), transparent);
    clip-path: polygon(0 80%, 100% 80%, 100% 100%, 0 100%);
    transform: translate(5px);
  }

  @keyframes glitch-anim-1 {
    0% { clip-path: polygon(0 20%, 100% 20%, 100% 21%, 0 21%); }
    20% { clip-path: polygon(0 33%, 100% 33%, 100% 34%, 0 34%); }
    40% { clip-path: polygon(0 10%, 100% 10%, 100% 12%, 0 12%); }
    60% { clip-path: polygon(0 75%, 100% 75%, 100% 77%, 0 77%); }
    80% { clip-path: polygon(0 55%, 100% 55%, 100% 56%, 0 56%); }
    100% { clip-path: polygon(0 90%, 100% 90%, 100% 92%, 0 92%); }
  }

  @keyframes glitch-anim-2 {
    0% { clip-path: polygon(0 15%, 100% 15%, 100% 16%, 0 16%); }
    20% { clip-path: polygon(0 40%, 100% 40%, 100% 42%, 0 42%); }
    40% { clip-path: polygon(0 60%, 100% 60%, 100% 61%, 0 61%); }
    60% { clip-path: polygon(0 25%, 100% 25%, 100% 27%, 0 27%); }
    80% { clip-path: polygon(0 85%, 100% 85%, 100% 86%, 0 86%); }
    100% { clip-path: polygon(0 50%, 100% 50%, 100% 52%, 0 52%); }
  }

  .code-glitch-active {
    filter: sepia(0.5) hue-rotate(180deg) contrast(1.2);
  }
}
